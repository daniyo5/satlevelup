:root.dark{
  --bg-start: #1a1a2e;
  --bg-end: #16213e;
  --text:#e5f0ff;
  --muted:#a2b3c7;
  --card: rgba(27, 27, 27, 0.7);
  --border:#2a2a2a;
  --shadow:0 10px 30px rgba(0,0,0,.35);
}
:root{
  --blue:#0b7bba;
  --bg-start: #e3f2fd;
  --bg-end: #bbdefb;
  --text:#0f172a;
  --muted:#607089;
  --card:#ffffff;
  --border:rgba(2,6,23,.08);
  --green:#28A745;
  --red:#FF4C4C;
  --orange:#FF9800;
  --radius:16px;
  --shadow:0 10px 30px rgba(2,6,23,.08);
}

*{box-sizing:border-box}
body{
  margin:0; font-family:Poppins,system-ui,sans-serif;
  background-image: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-end) 100%);
  color:var(--text); display:flex; flex-direction:column; min-height:100svh;
}
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 16px; border-bottom:1px solid var(--border);
  position:sticky; top:0; background:rgba(255,255,255,0.1); backdrop-filter: blur(10px); z-index:10;
}
:root.dark .topbar { background: rgba(27, 27, 27, 0.3); }
.brand{font-weight:800; color:var(--blue)}
.actions{display:flex; gap:8px}
button{
  appearance:none; border:none; background:var(--blue); color:#fff;
  padding:10px 14px; border-radius:12px; font-weight:600; cursor:pointer;
  transition: opacity 0.2s, background-color 0.2s;
}
button:hover { opacity: 0.85; }
button:disabled { opacity: 0.5; cursor: not-allowed; }
button.ghost{background:transparent; color:var(--text); border:1px solid var(--border)}
.container{max-width:1000px; width:100%; margin:0 auto; padding:16px; flex:1;}
.grid{display:grid; gap:16px}
.grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
.grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
.grid.hidden { display: none; }
@media (max-width:900px){.grid.cols-3{grid-template-columns:repeat(2,1fr)}}
@media (max-width:640px){.grid.cols-2,.grid.cols-3{grid-template-columns:1fr}}
.card{
  background:var(--card); border:1px solid var(--border); border-radius:var(--radius);
  padding:16px; box-shadow:var(--shadow);
}
.card.click{cursor:pointer; transition:transform .15s, box-shadow .15s}
.card.click:hover{transform:translateY(-4px); box-shadow: 0 15px 35px rgba(2,6,23,.1);}
:root.dark .card.click:hover{ box-shadow: 0 15px 35px rgba(0,0,0,.4); }
.header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px; flex-wrap: wrap;}
.h1{font-size:24px; font-weight:800}
.h2{font-size:18px; font-weight:700}
.muted{color:var(--muted); font-size:13px}
.progress{height:8px; background:rgba(11,123,186,.15); border-radius:999px; overflow:hidden}
.progress > span{display:block; height:100%; background:var(--blue); width:0%}
.pill{font-size: 14px; padding:6px 12px; border-radius:999px; border:1px solid var(--border);}
.badge{
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 8px;
  background: rgba(11,123,186,.1);
  color: var(--blue);
  font-weight: 700;
  vertical-align: middle;
}
.row{display:flex; align-items:center; gap:8px; flex-wrap:wrap}
.answers{display:grid; gap:10px}
.btn{
  padding:12px 14px; border-radius:14px; font-weight:600; cursor:pointer; color:var(--text); text-align:left;
  border:1px solid var(--border); background:rgba(2,6,23,.03);
}
.btn.correct{background:rgba(40,167,69,.12); border-color:rgba(40,167,69,.4)}
.btn.incorrect{background:rgba(255,76,76,.1); border-color:rgba(255,76,76,.4)}
.toast{
  position:fixed; left:50%; transform:translateX(-50%); bottom:20px;
  background:#111; color:#fff; padding:10px 14px; border-radius:999px; font-size:13px;
  box-shadow:var(--shadow); opacity:0; pointer-events:none; transition:.25s; z-index: 1001;
}
:root.dark .toast{background:#f0f0f0; color:#111;}
.toast.show{opacity:1; transform:translateX(-50%) translateY(-6px)}
.footer{border-top:1px solid var(--border); padding:14px; text-align:center; color:var(--muted)}
.level-chip{display:flex; align-items:center; justify-content:space-between; gap: 8px; padding:12px; border-radius:12px; border:1px solid var(--border);}
.level-chip-info { flex-grow: 1; }
.level-chip.easy{background:rgba(40,167,69,.08)}
.level-chip.medium{background:rgba(255,193,7,.12)}
.level-chip.hard{background:rgba(255,152,0,.12)}
.level-chip.mastery{background:rgba(255,76,76,.1)}

@media (max-width: 640px) {
  .dashboard-header { flex-direction: column; align-items: flex-start; }
  .pill { font-size: 12px; padding: 4px 10px; }
  .level-chip { flex-direction: column; align-items: flex-start; }
  .practice-btn { margin-top: 8px; width: 100%; text-align: center; justify-content: center;}
}
.progress-grid{display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:16px; margin-top:16px; border-bottom:1px solid var(--border); padding-bottom:16px;}
.progress-item{display: flex; align-items:center; gap:12px;}
.progress-circle {
  width: 50px; height: 50px; flex-shrink: 0;
  border-radius: 50%; display: grid; place-items: center;
  background: radial-gradient(closest-side, var(--card) 79%, transparent 80% 100%),
              conic-gradient(var(--blue) calc(var(--p, 0) * 1%), var(--border) 0);
  font-size: 14px; font-weight: 600;
}
.focus-grid { display: flex; flex-direction: column; gap: 10px; }
.focus-dropdown summary { list-style: none; display: flex; justify-content: space-between; align-items: center; padding: 12px; border-radius: 12px; background: rgba(255, 152, 0, 0.05); cursor: pointer; }
.focus-dropdown summary::-webkit-details-marker { display: none; }
.focus-dropdown .arrow { width: 10px; height: 10px; border-right: 2px solid var(--text); border-bottom: 2px solid var(--text); transform: rotate(45deg); transition: transform 0.2s; }
.focus-dropdown[open] > summary .arrow { transform: rotate(-135deg); }
.focus-details { padding: 10px 0 0 15px; display: flex; flex-direction: column; gap: 8px; }

.review-answers { margin: 12px 0; display: flex; flex-direction: column; gap: 8px; }
.review-option { padding: 10px; border-radius: 8px; border: 1px solid var(--border); position: relative; }
.review-option.correct { background: rgba(40,167,69,.1); border-color: rgba(40,167,69,.5); font-weight: 600; }
.review-option.incorrect { background: rgba(255,76,76,.1); border-color: rgba(255,76,76,.5); }
.your-pick { font-size: 8px; font-weight: bold; padding: 2px 6px; border-radius: 4px; background: var(--border); position: absolute; right: 10px; top: 50%; transform: translateY(-50%);}
.explanation { margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border); font-size: 14px; }

/* === Fullscreen Piano Game Styles === */
.game-fullscreen-modal {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: #000;
  display: flex; justify-content: center; align-items: center; z-index: 1000;
}
.game-close-btn {
  position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.2); border: 1px solid #fff; color: white;
  width: 40px; height: 40px; border-radius: 50%; font-size: 24px; line-height: 1; padding: 0; z-index: 1005; cursor: pointer;
}
.pre-game-container {
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(10px);
  color: #fff;
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: var(--radius); padding: 24px;
  width: 90%; max-width: 400px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.5);
  text-align: center;
}
.pre-game-step { display: none; }
.pre-game-step.active { display: block; animation: fadeIn 0.3s ease-in-out; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
.pre-game-container h1 { margin-top: 0; }
.pre-game-container .choices { display: flex; flex-direction: column; gap: 12px; margin: 20px 0; }
.choice-btn {
  width: 100%; padding: 15px; font-size: 16px; position: relative;
  background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
  color: #fff; text-align: left;
}
.choice-btn:hover { background: rgba(255,255,255,0.2); }
.choice-btn .high-score { font-size: 11px; color: #ccc; position: absolute; right: 15px; top: 50%; transform: translateY(-50%); }
.back-btn { background: none; color: #ccc; margin-top: 10px; padding: 5px 10px; font-size: 14px; border: none; }
.back-btn:hover { color: #fff; }

.game-container {
  position: relative; overflow: hidden; padding: 0; width: 100%; height: 100%;
  display: flex; flex-direction: column; user-select: none;
}
#game-score-ingame {
  position: absolute;
  top: 30px;
  left: 50%;
  transform: translateX(-50%);
  color: #ff3b30;
  font-size: 64px;
  font-weight: bold;
  text-shadow: 2px 2px 3px rgba(0,0,0,0.5);
  z-index: 50;
  pointer-events: none;
  transition: transform 0.2s ease-out, color 0.2s ease-out;
}
#game-score-ingame.score-milestone {
  transform: translateX(-50%) scale(1.3);
  color: #ffd700;
}
#piano-board {
    position: relative; flex: 1; width: 100%; overflow: hidden;
    background: #fff;
}
.piano-row {
    position: absolute; width: 100%; display: grid; grid-template-columns: repeat(4, 1fr);
    transform: translateZ(0);
}
.piano-tile {
    cursor: pointer;
    background-color: #fff;
    border-top: 1px solid #c5c5c5;
    border-left: 1px solid #c5c5c5;
    transition: background-color 0.05s;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 28px;
    font-weight: bold;
}
.piano-row:first-child .piano-tile { border-top: none; }
.piano-tile:first-child { border-left: none; }
.piano-tile.black { background-color: #000; }
.piano-tile.start-tile { background-color: #000; }

#stars-animation-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; pointer-events: none; z-index: 20; }
.star { position: absolute; width: 4px; height: 4px; background: gold; border-radius: 50%; box-shadow: 0 0 6px gold; animation-name: fall-and-fade; animation-timing-function: linear; }
@keyframes fall-and-fade { from { transform: translateY(-20px) scale(1); opacity: 1; } to { transform: translateY(100vh) scale(0.5); opacity: 0; } }

#game-overlay {
  position: absolute; top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.7); color: white;
  display: none;
  flex-direction: column; justify-content: center; align-items: center; text-align: center; gap: 20px;
  z-index: 100;
}
#game-start-text { font-size: 28px; font-weight: 700; line-height: 1.4; }
#game-start-text small { font-size: 18px; color: #ccc; margin-top: 8px; display: block; }
#game-start-btn { font-size: 18px; padding: 12px 24px; }


/* =========================================== */
/* === REVERSE MODE & TAPPED TILE STYLES === */
/* =========================================== */

/* --- Step 1: Reverse Mode Base Colors --- */

.reverse-mode {
  background-color: white; 
}
.reverse-mode .piano-tile.black {
  background-color: white;
  border: 1px solid #eee;
}
.reverse-mode .piano-tile {
  background-color: black;
  border: 1px solid black;
}
.reverse-mode .piano-tile.start-tile {
  background-color: black; /* This ensures the start tile is black in reverse mode */
}
.reverse-mode .piano-tile.start-tile span {
    color: white;
}


/* --- Step 2: Normal & Faster Mode Tapped Rows --- */

/* This styles the BLACK tile you correctly tapped to a dark grey */
.piano-row.tapped .piano-tile.black {
    background-color: #505050;
    border-color: #404040;
}

/* This styles the OTHER (white) tiles in that same row to a light grey */
.piano-row.tapped .piano-tile:not(.black) {
    background-color: #d3d3d3;
    border-color: #c0c0c0;
}


/* --- Step 3: Reverse Mode Tapped Rows --- */

/* This styles the TARGET tile (the one without .black) you tapped to a dark grey */
.reverse-mode .piano-row.tapped .piano-tile:not(.black) {
    background-color: #505050;
    border-color: #404040;
}

/* This styles the OTHER (safe) tiles in that same row to a light grey */
.reverse-mode .piano-row.tapped .piano-tile.black {
    background-color: #d3d3d3;
    border-color: #c0c0c0;
}
:root{
  --blue:#0b7bba;
  --bg-start: #e3f2fd;
  --bg-end: #bbdefb;
  --text:#0f172a;
  --muted:#607089;
  --card:#ffffff;
  --border:rgba(2,6,23,.08);
  --green:#28A745;
  --red:#FF4C4C;
  --orange:#FF9800;
  --radius:16px;
  --shadow:0 10px 30px rgba(2,6,23,.08);
}
:root.dark{
  --bg-start: #1a1a2e;
  --bg-end: #16213e;
  --text:#e5f0ff;
  --muted:#a2b3c7;
  --card: rgba(27, 27, 27, 0.7);
  --border:#2a2a2a;
  --shadow:0 10px 30px rgba(0,0,0,.35);
}
*{box-sizing:border-box}
body{
  margin:0; font-family:Poppins,system-ui,sans-serif;
  background-image: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-end) 100%);
  color:var(--text); display:flex; flex-direction:column; min-height:100svh;
}
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 16px; border-bottom:1px solid var(--border);
  position:sticky; top:0; background:rgba(255,255,255,0.1); backdrop-filter: blur(10px); z-index:10;
}
:root.dark .topbar { background: rgba(27, 27, 27, 0.3); }
.brand{font-weight:800; color:var(--blue)}
.actions{display:flex; gap:8px}
button{
  appearance:none; border:none; background:var(--blue); color:#fff;
  padding:10px 14px; border-radius:12px; font-weight:600; cursor:pointer;
  transition: opacity 0.2s, background-color 0.2s;
}
button:hover { opacity: 0.85; }
button:disabled { opacity: 0.5; cursor: not-allowed; }
button.ghost{background:transparent; color:var(--text); border:1px solid var(--border)}
.container{max-width:1000px; width:100%; margin:0 auto; padding:16px; flex:1;}
.grid{display:grid; gap:16px}
.grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
.grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
.grid.hidden { display: none; }
@media (max-width:900px){.grid.cols-3{grid-template-columns:repeat(2,1fr)}}
@media (max-width:640px){.grid.cols-2,.grid.cols-3{grid-template-columns:1fr}}
.card{
  background:var(--card); border:1px solid var(--border); border-radius:var(--radius);
  padding:16px; box-shadow:var(--shadow);
}
.card.click{cursor:pointer; transition:transform .15s, box-shadow .15s}
.card.click:hover{transform:translateY(-4px); box-shadow: 0 15px 35px rgba(2,6,23,.1);}
:root.dark .card.click:hover{ box-shadow: 0 15px 35px rgba(0,0,0,.4); }
.header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px; flex-wrap: wrap;}
.h1{font-size:24px; font-weight:800}
.h2{font-size:18px; font-weight:700}
.muted{color:var(--muted); font-size:13px}
.progress{height:8px; background:rgba(11,123,186,.15); border-radius:999px; overflow:hidden}
.progress > span{display:block; height:100%; background:var(--blue); width:0%}
.pill{font-size: 14px; padding:6px 12px; border-radius:999px; border:1px solid var(--border);}
.badge{
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 8px;
  background: rgba(11,123,186,.1);
  color: var(--blue);
  font-weight: 700;
  vertical-align: middle;
}
.row{display:flex; align-items:center; gap:8px; flex-wrap:wrap}
.answers{display:grid; gap:10px}
.btn{
  padding:12px 14px; border-radius:14px; font-weight:600; cursor:pointer; color:var(--text); text-align:left;
  border:1px solid var(--border); background:rgba(2,6,23,.03);
}
.btn.correct{background:rgba(40,167,69,.12); border-color:rgba(40,167,69,.4)}
.btn.incorrect{background:rgba(255,76,76,.1); border-color:rgba(255,76,76,.4)}
.toast{
  position:fixed; left:50%; transform:translateX(-50%); bottom:20px;
  background:#111; color:#fff; padding:10px 14px; border-radius:999px; font-size:13px;
  box-shadow:var(--shadow); opacity:0; pointer-events:none; transition:.25s; z-index: 1001;
}
:root.dark .toast{background:#f0f0f0; color:#111;}
.toast.show{opacity:1; transform:translateX(-50%) translateY(-6px)}
.footer{border-top:1px solid var(--border); padding:14px; text-align:center; color:var(--muted)}
.level-chip{display:flex; align-items:center; justify-content:space-between; gap: 8px; padding:12px; border-radius:12px; border:1px solid var(--border);}
.level-chip-info { flex-grow: 1; }
.level-chip.easy{background:rgba(40,167,69,.08)}
.level-chip.medium{background:rgba(255,193,7,.12)}
.level-chip.hard{background:rgba(255,152,0,.12)}
.level-chip.mastery{background:rgba(255,76,76,.1)}

@media (max-width: 640px) {
  .dashboard-header { flex-direction: column; align-items: flex-start; }
  .pill { font-size: 12px; padding: 4px 10px; }
  .level-chip { flex-direction: column; align-items: flex-start; }
  .practice-btn { margin-top: 8px; width: 100%; text-align: center; justify-content: center;}
}
.progress-grid{display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:16px; margin-top:16px; border-bottom:1px solid var(--border); padding-bottom:16px;}
.progress-item{display: flex; align-items:center; gap:12px;}
.progress-circle {
  width: 50px; height: 50px; flex-shrink: 0;
  border-radius: 50%; display: grid; place-items: center;
  background: radial-gradient(closest-side, var(--card) 79%, transparent 80% 100%),
              conic-gradient(var(--blue) calc(var(--p, 0) * 1%), var(--border) 0);
  font-size: 14px; font-weight: 600;
}
.focus-grid { display: flex; flex-direction: column; gap: 10px; }
.focus-dropdown summary { list-style: none; display: flex; justify-content: space-between; align-items: center; padding: 12px; border-radius: 12px; background: rgba(255, 152, 0, 0.05); cursor: pointer; }
.focus-dropdown summary::-webkit-details-marker { display: none; }
.focus-dropdown .arrow { width: 10px; height: 10px; border-right: 2px solid var(--text); border-bottom: 2px solid var(--text); transform: rotate(45deg); transition: transform 0.2s; }
.focus-dropdown[open] > summary .arrow { transform: rotate(-135deg); }
.focus-details { padding: 10px 0 0 15px; display: flex; flex-direction: column; gap: 8px; }

.review-answers { margin: 12px 0; display: flex; flex-direction: column; gap: 8px; }
.review-option { padding: 10px; border-radius: 8px; border: 1px solid var(--border); position: relative; }
.review-option.correct { background: rgba(40,167,69,.1); border-color: rgba(40,167,69,.5); font-weight: 600; }
.review-option.incorrect { background: rgba(255,76,76,.1); border-color: rgba(255,76,76,.5); }
.your-pick { font-size: 8px; font-weight: bold; padding: 2px 6px; border-radius: 4px; background: var(--border); position: absolute; right: 10px; top: 50%; transform: translateY(-50%);}
.explanation { margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border); font-size: 14px; }

/* **NEW** Styles for Question Formatting */
.question-passage-header {
  font-size: 14px;
  font-weight: 600;
  color: var(--blue);
  margin-bottom: 8px;
}
.question-passage {
  font-size: 14px;
  font-style: italic;
  color: var(--muted);
  line-height: 1.6;
  margin-bottom: 12px;
  border-left: 3px solid var(--border);
  padding-left: 12px;
}
.question-main-text {
  font-size: 18px; /* This is now the h2 size */
  font-weight: 700;
}
:root.dark{
  --bg-start: #1a1a2e;
  --bg-end: #16213e;
  --text:#e5f0ff;
  --muted:#a2b3c7;
  --card: rgba(27, 27, 27, 0.7);
  --border:#2a2a2a;
  --shadow:0 10px 30px rgba(0,0,0,.35);
   /* ... your other dark mode variables ... */
  --graph-background-color: #295d91; /* A dark slate-blue for dark mode */
  --border-color: #444444;
}
:root{
  --blue:#0b7bba;
  --bg-start: #e3f2fd;
  --bg-end: #cddde9;
  --text:#0f172a;
  --muted:#607089;
  --card:#ffffff;
  --border:rgba(2,6,23,.08);
  --green:#28A745;
  --red:#FF4C4C;
  --orange:#FF9800;
  --radius:16px;
  --shadow:0 10px 30px rgba(2,6,23,.08);
}
:root.dark{
  --bg-start: #1a1a2e;
  --bg-end: #16213e;
  --text:#e5f0ff;
  --muted:#a2b3c7;
  --card: rgba(27, 27, 27, 0.7);
  --border:#2a2a2a;
  --shadow:0 10px 30px rgba(0,0,0,.35);
   /* ... your other dark mode variables ... */
  --graph-background-color: #295d91; /* A dark slate-blue for dark mode */
  --border-color: #444444;
}
*{box-sizing:border-box}
body{
  margin:0; font-family:Poppins,system-ui,sans-serif;
  background-image: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-end) 100%);
  color:var(--text); display:flex; flex-direction:column; min-height:100svh;
}
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 16px; border-bottom:1px solid var(--border);
  position:sticky; top:0; background:rgba(255,255,255,0.1); backdrop-filter: blur(10px); z-index:10;
}
:root.dark .topbar { background: rgba(27, 27, 27, 0.3); }
.brand{font-weight:800; color:var(--blue)}
.actions{display:flex; gap:8px}
button{
  appearance:none; border:none; background:var(--blue); color:#fff;
  padding:10px 14px; border-radius:12px; font-weight:600; cursor:pointer;
  transition: opacity 0.2s, background-color 0.2s;
}
button:hover { opacity: 0.85; }
button:disabled { opacity: 0.5; cursor: not-allowed; }
button.ghost{background:transparent; color:var(--text); border:1px solid var(--border)}
.container{max-width:1000px; width:100%; margin:0 auto; padding:16px; flex:1;}
.grid{display:grid; gap:16px}
.grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
.grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
.grid.hidden { display: none; }
@media (max-width:900px){.grid.cols-3{grid-template-columns:repeat(2,1fr)}}
@media (max-width:640px){.grid.cols-2,.grid.cols-3{grid-template-columns:1fr}}
.card{
  background:var(--card); border:1px solid var(--border); border-radius:var(--radius);
  padding:16px; box-shadow:var(--shadow);
}
.card.click{cursor:pointer; transition:transform .15s, box-shadow .15s}
.card.click:hover{transform:translateY(-4px); box-shadow: 0 15px 35px rgba(2,6,23,.1);}
:root.dark .card.click:hover{ box-shadow: 0 15px 35px rgba(0,0,0,.4); }
.header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px; flex-wrap: wrap;}
.h1{font-size:24px; font-weight:800}
.h2{font-size:18px; font-weight:700}
.muted{color:var(--muted); font-size:13px}
.progress{height:8px; background:rgba(11,123,186,.15); border-radius:999px; overflow:hidden}
.progress > span{display:block; height:100%; background:var(--blue); width:0%}
.pill{font-size: 14px; padding:6px 12px; border-radius:999px; border:1px solid var(--border);}
.badge{
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 8px;
  background: rgba(11,123,186,.1);
  color: var(--blue);
  font-weight: 700;
  vertical-align: middle;
}
.row{display:flex; align-items:center; gap:8px; flex-wrap:wrap}
.answers{display:grid; gap:10px}
.btn{
  padding:12px 14px; border-radius:14px; font-weight:600; cursor:pointer; color:var(--text); text-align:left;
  border:1px solid var(--border); background:rgba(2,6,23,.03);
}
.btn.correct{background:rgba(40,167,69,.12); border-color:rgba(40,167,69,.4)}
.btn.incorrect{background:rgba(255,76,76,.1); border-color:rgba(255,76,76,.4)}
.toast{
  position:fixed; left:50%; transform:translateX(-50%); bottom:20px;
  background:#111; color:#fff; padding:10px 14px; border-radius:999px; font-size:13px;
  box-shadow:var(--shadow); opacity:0; pointer-events:none; transition:.25s; z-index: 1001;
}
:root.dark .toast{background:#f0f0f0; color:#111;}
.toast.show{opacity:1; transform:translateX(-50%) translateY(-6px)}
.footer{border-top:1px solid var(--border); padding:14px; text-align:center; color:var(--muted)}
.level-chip{display:flex; align-items:center; justify-content:space-between; gap: 8px; padding:12px; border-radius:12px; border:1px solid var(--border);}
.level-chip-info { flex-grow: 1; }
.level-chip.easy{background:rgba(40,167,69,.08)}
.level-chip.medium{background:rgba(255,193,7,.12)}
.level-chip.hard{background:rgba(255,152,0,.12)}
.level-chip.mastery{background:rgba(255,76,76,.1)}

@media (max-width: 640px) {
  .dashboard-header { flex-direction: column; align-items: flex-start; }
  .pill { font-size: 12px; padding: 4px 10px; }
  .level-chip { flex-direction: column; align-items: flex-start; }
  .practice-btn { margin-top: 8px; width: 100%; text-align: center; justify-content: center;}
}
.progress-grid{display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:16px; margin-top:16px; border-bottom:1px solid var(--border); padding-bottom:16px;}
.progress-item{display: flex; align-items:center; gap:12px;}
.progress-circle {
  width: 50px; height: 50px; flex-shrink: 0;
  border-radius: 50%; display: grid; place-items: center;
  background: radial-gradient(closest-side, var(--card) 79%, transparent 80% 100%),
              conic-gradient(var(--blue) calc(var(--p, 0) * 1%), var(--border) 0);
  font-size: 14px; font-weight: 600;
}
.focus-grid { display: flex; flex-direction: column; gap: 10px; }
.focus-dropdown summary { list-style: none; display: flex; justify-content: space-between; align-items: center; padding: 12px; border-radius: 12px; background: rgba(255, 152, 0, 0.05); cursor: pointer; }
.focus-dropdown summary::-webkit-details-marker { display: none; }
.focus-dropdown .arrow { width: 10px; height: 10px; border-right: 2px solid var(--text); border-bottom: 2px solid var(--text); transform: rotate(45deg); transition: transform 0.2s; }
.focus-dropdown[open] > summary .arrow { transform: rotate(-135deg); }
.focus-details { padding: 10px 0 0 15px; display: flex; flex-direction: column; gap: 8px; }

.review-answers { margin: 12px 0; display: flex; flex-direction: column; gap: 8px; }
.review-option { padding: 10px; border-radius: 8px; border: 1px solid var(--border); position: relative; }
.review-option.correct { background: rgba(40,167,69,.1); border-color: rgba(40,167,69,.5); font-weight: 600; }
.review-option.incorrect { background: rgba(255,76,76,.1); border-color: rgba(255,76,76,.5); }
.your-pick { font-size: 8px; font-weight: bold; padding: 2px 6px; border-radius: 4px; background: var(--border); position: absolute; right: 10px; top: 50%; transform: translateY(-50%);}
.explanation { margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border); font-size: 14px; }

.question-passage-header {
  font-size: 14px;
  font-weight: 600;
  color: var(--blue);
  margin-bottom: 8px;
}
.question-passage {
  font-size: 14px;
  font-style: italic;
  color: var(--muted);
  line-height: 1.6;
  margin-bottom: 12px;
  border-left: 3px solid var(--border);
  padding-left: 12px;
}
.question-main-text {
  font-size: 18px;
  font-weight: 700;
}

/* **FIXED** This new rule makes the review screen responsive */
@media (max-width: 768px) {
    .review-grid {
        grid-template-columns: 1fr; /* Stack to a single column on smaller screens */
        gap: 16px; /* Add some space between the stacked cards */
    }
}
/* --- CSS FOR RESPONSIVE REVIEW CARDS & CONTENT --- */

/* 1. The Grid Container */
.review-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  padding: 20px;
  justify-content: center;
}

/* 2. The Card Itself */
.review-grid .card {
  width: 100%;
  max-width: 800px; /* Adjust as needed */
  flex-grow: 1;
  box-sizing: border-box;
  background-color: var(--background-offset-color);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 20px;
  /* This is crucial: it prevents the card's children from overflowing */
  overflow: hidden; 
}

/* 3. The container for question text/tables */
.question-content {
  margin-bottom: 20px;
  /* This forces long text (like code) to wrap */
  overflow-wrap: break-word;
  word-wrap: break-word; /* Older browser support */
  word-break: break-all;  /* Even more aggressive wrapping */
}

/* 4. The container for tables to allow horizontal scrolling */
.table-container {
  overflow-x: auto; /* This makes tables scrollable horizontally */
  width: 100%;
  -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
  border: 1px solid var(--border-color);
  border-radius: 4px;
  margin: 10px 0;
}

/* 5. Ensure the question title (h2) also wraps */
.review-grid .h2 {
    overflow-wrap: break-word;
    word-wrap: break-word;
}
/* --- CSS FOR RESPONSIVE REVIEW CARDS & CONTENT --- */

/* 1. The Grid Container */
.review-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  padding: 20px;
  justify-content: center;
}

/* 2. The Card Itself */
.review-grid .card {
  width: 100%;
  max-width: 800px; /* Adjust as needed */
  flex-grow: 1;
  box-sizing: border-box;
  background-color: var(--background-offset-color);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 20px;
  /* This is crucial: it prevents the card's children from overflowing */
  overflow: hidden; 
}

/* 3. The container for question text/tables */
.question-content {
  margin-bottom: 20px;
  /* This forces long text (like code) to wrap */
  overflow-wrap: break-word;
  word-wrap: break-word; /* Older browser support */
  word-break: break-all;  /* Even more aggressive wrapping */
}

/* 4. The container for tables to allow horizontal scrolling */
.table-container {
  overflow-x: auto; /* This makes tables scrollable horizontally */
  width: 100%;
  -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
  border: 1px solid var(--border-color);
  border-radius: 4px;
  margin: 10px 0;
}

/* 5. Ensure the question title (h2) also wraps */
.review-grid .h2 {
    overflow-wrap: break-word;
    word-wrap: break-word;
}
/* --- CSS FOR RESPONSIVE REVIEW CARDS & CONTENT --- */

/* 1. The Grid Container */
.review-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  padding: 20px;
  justify-content: center;
}

/* 2. The Card Itself */
.review-grid .card {
  width: 100%;
  max-width: 800px; /* Adjust as needed */
  flex-grow: 1;
  box-sizing: border-box;
  background-color: var(--background-offset-color);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 20px;
  /* This is crucial: it prevents the card's children from overflowing */
  overflow: hidden; 
}

/* 3. The container for question text/tables */
.question-content {
  margin-bottom: 20px;
  /* This forces long text (like code) to wrap */
  overflow-wrap: break-word;
  word-wrap: break-word; /* Older browser support */
  word-break: break-all;  /* Even more aggressive wrapping */
}

/* 4. The container for tables to allow horizontal scrolling */
.table-container {
  overflow-x: auto; /* This makes tables scrollable horizontally */
  width: 100%;
  -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
  border: 1px solid var(--border-color);
  border-radius: 4px;
  margin: 10px 0;
}

/* 5. Ensure the question title (h2) also wraps */
.review-grid .h2 {
    overflow-wrap: break-word;
    word-wrap: break-word;
}
/* This style block will be embedded in each relevant question */
  /* This container makes the table scrollable on small screens */
  .table-container {
    overflow-x: auto;
    width: 100%;
    border-radius: 8px;
    border: 1px solid var(--border-color, #ddd);
    -webkit-overflow-scrolling: touch; /* Smooth scrolling for iOS */
  }
  .data-table {
    width: 100%;
    min-width: 600px; /* Ensures table has a minimum width before scrolling starts */
    border-collapse: collapse;
    margin: 0;
    font-size: 0.9em;
    font-family: sans-serif;
    color: #5579fc; /* Your requested text color */
    background-color: var(--background-offset-color, #f9f9f9);
  }
  .data-table thead tr {
    background-color: var(--primary-color, #007bff);
    color: #ffffff;
    text-align: left;
  }
  .data-table th, .data-table td {
    padding: 12px 15px;
    border: 1px solid var(--border-color, #ddd);
  }
  .data-table tbody tr {
    border-bottom: 1px solid var(--border-color, #ddd);
  }
  .data-table tbody tr:nth-of-type(even) {
    background-color: var(--background-color, #fff);
  }
/**
 * Universal Scrollable Table Container
 *
 * Use this to wrap any <table> element to make it responsive.
 * It will scroll horizontally on small screens and vertically if the table is too tall.
 */
.table-scroll-container {
  /* This is the most important part for horizontal scrolling */
  overflow-x: auto; 
  
  /* This is the most important part for vertical scrolling */
  overflow-y: auto;
  max-height: 400px; /* Adjust this value to control when vertical scroll appears */

  /* Styling to make it look clean */
  width: 100%;
  border: 1px solid var(--border-color, #dddddd);
  border-radius: 8px;
  -webkit-overflow-scrolling: touch; /* For smooth scrolling on iOS */
}

/**
 * Table Styling
 *
 * Ensures the table inside the container behaves correctly.
 */
.table-scroll-container .data-table {
  width: 100%;
  /* Set a minimum width to prevent columns from becoming too narrow.
     The scrollbar will appear if the container is smaller than this. */
  min-width: 600px; 
  border-collapse: collapse;
}

/* Optional: Make the table header sticky during vertical scroll */
.table-scroll-container .data-table thead {
  position: sticky;
  top: 0;
  z-index: 1; /* Ensures header stays above the scrolling content */
}

/* Ensures the sticky header has a solid background */
.table-scroll-container .data-table thead tr {
  background-color: var(--primary-color, #007bff);
  color: #ffffff;
}

:root {
  --blue:#0b7bba;
  --bg-start: #e3f2fd;
  --bg-end: #cddde9;
  --text:#0f172a;
  --muted:#607089;
  --card:#ffffff; /* plain white card */
  --background-offset-color:#f7f9fc; /* softer contrast in light mode */
  --border:rgba(2,6,23,.08);
  --green:#28A745;
  --red:#FF4C4C;
  --orange:#FF9800;
  --radius:16px;
  --shadow:0 10px 30px rgba(2,6,23,.08);
}

:root.dark {
  --bg-start: #1a1a2e;
  --bg-end: #16213e;
  --text:#e5f0ff;
  --muted:#a2b3c7;
  --card: rgba(27, 27, 27, 0.7);
  --background-offset-color: #222b45; /* softer dark shade so cards pop */
  --border:#2a2a2a;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --graph-background-color: #295d91;
  --border-color: #444444;
}
